\subsection{Position-Based Dynamics}
\input{tex/theory/pbd.tex}

\subsection{Collision between particles}

The collision constraint between two particles $ \mathbf{x}_{i} $ and $ \mathbf{x}_{j} $ is formulated by Equation \ref{eq:collisionConstraint}, where the radius of each particle is $ r $. It is commonly solved by translating each particle away from one another along the line $ \| \mathbf{x}_{ij} \| $.

\begin{equation} \label{eq:collisionConstraint}
  C(\mathbf{x}_{i}, \mathbf{x}_{j}) = \| \mathbf{x}_{ij} \| - r \geq 0
\end{equation}

Solving collision constraints between particles by brute force is a very time consuming process, $\mathcal{O}(n^{2})$. As of such developers often look at smarter ways of solving collisions between particles. Due to the fact that particles and other objects for that matter only interact in small regions it is well suited to look at methods involving spatial subdivisions.

\subsubsection{Uniform grid}

One such method that also performs well and is easy to parallelize is the use of a \textit{Uniform Grid} \ref{Green}. A uniform grid implies that the world is composed of a number of cells in a cubical grid, where each cell can store particles. If the cell width equals the diameter of a particle (under the assumption that all particles have the same diameter) collisions only occur between particles of neighbouring cells. This means that only 27 cells per particle needs to be considered in a three dimensional space if the particle collisions are to be solved in a particle based manner. This type of grid is also convenient when solving fluid constraints that originates from the ideas behind \textit{Smoothed-Particle Hydrodynamics} (SPH), as those require all neighbouring particles within a certain distance (defined by the kernel width of \textit{Spiky} and \textit{Poly} kernels).

\subsubsection{Collision with objects}

By transforming the geometry of an object to a particle representation and adding shape matching constraints too hold the particles together one can also have collisions with arbitrary objects \ref{muller2005meshless, macklin2014unified}. The process of creating a particle representation of an object is called \textit{Voxelization} and there exist various methods for achieving this, e.g. \ref{VoxPolygon, VoxSingle}. Some methods build \textit{Occtrees} to be be used for querying occupied \textit{Voxels} while other methods derive the particle representation from ray-casting \ref{VoxSingle}. Performance wise it is suitable to perform the Voxelization of objects prior to the start of the simulation.
